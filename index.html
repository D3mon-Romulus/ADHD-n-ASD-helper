<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="ADHD & ASD Helper Dashboard - Task management and progress tracking for neurodivergent children">
  <title>ADHD & ASD Helper</title>
  <link rel="stylesheet" href="style.css">
<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#4CAF50">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="ADHD Helper">
<link rel="apple-touch-icon" href="icon-192.png">
</head>
<body data-theme="light">
  <!-- Skip Link for Accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Welcome Panel (shown for new users) -->
  <div id="welcomePanel" class="welcome-panel" style="display: none;" role="dialog" aria-labelledby="welcome-title">
    <div class="welcome-content">
      <h1 id="welcome-title">🌟 Welcome to Your Helper Dashboard!</h1>
      <p>Let's create your first profile to get started!</p>
      <div class="welcome-form">
        <label for="welcomeChildName" class="sr-only">Child's name</label>
        <input type="text" id="welcomeChildName" placeholder="Child's name" maxlength="50" aria-label="Child's name">
        <label for="welcomeChildAge" class="sr-only">Child's age</label>
        <input type="number" id="welcomeChildAge" placeholder="Age" min="3" max="18" aria-label="Child's age">
        <button onclick="createWelcomeProfile()" class="welcome-btn" aria-label="Create profile and start using the app">Create Profile & Start! 🚀</button>
      </div>
    </div>
  </div>

  <!-- Accessibility Controls -->
  <div class="accessibility-controls" role="toolbar" aria-label="Accessibility controls">
    <button class="accessibility-btn" onclick="increaseFontSize()" title="Increase Font Size" aria-label="Increase font size">A+</button>
    <button class="accessibility-btn" onclick="decreaseFontSize()" title="Decrease Font Size" aria-label="Decrease font size">A-</button>
    <button class="accessibility-btn" onclick="toggleHighContrast()" title="Toggle High Contrast" aria-label="Toggle high contrast mode">🎨</button>
  </div>

  <!-- Header -->
  <header role="banner">
    <h1>🌟 ADHD & ASD Dashboard</h1>
    <div class="header-controls">
      <div class="theme-selector">
       <button onclick="showThemeSelector()" aria-label="Choose color theme">Choose Theme</button>
      </div>
    
      <div class="profile-selector">
        <label for="currentProfile">Child:</label>
        <select id="currentProfile" onchange="switchProfile()" aria-label="Select child profile">
          <option value="">Select Child</option>
        </select>
        <button onclick="openProfileManager()" title="Manage Profiles" aria-label="Manage child profiles">👥</button>
      </div>
      <div id="rewardSection" role="status" aria-live="polite">
        <span id="rewardIcon" aria-hidden="true">⭐</span>
        <span id="rewardPoints" aria-label="Reward points">0</span>
      </div>
      <button onclick="toggleInfoPanel()" class="help-btn" aria-label="Show help information">ℹ️ Help</button>
      <button onclick="showResources()" aria-label="Show Australian ADHD resources">📚 Resources</button>
      <button id="parentLoginBtn" onclick="openParentModal()" aria-label="Parent login">Parent Login</button>
      <button onclick="window.location.href='info.html'" class="info-btn-header" aria-label="Go to information page">
        ℹ️ Info
      </button>
    </div>
  </header>

  <!-- SOS Crisis Mode Button - Always Visible -->
  <button id="sosButton" class="sos-button" onclick="activateSOSMode()" aria-label="Emergency calming help">
    🆘 Need Help Now
  </button>

  <!-- SOS Crisis Mode Overlay -->
  <div id="sosMode" class="sos-overlay" style="display: none;" role="dialog" aria-labelledby="sos-title" aria-modal="true">
    <div class="sos-container">
      <h2 id="sos-title" class="sos-title">You're Safe. Let's Feel Better Together.</h2>
      
      <div class="sos-choices">
        <button class="sos-choice" onclick="startSOSBreathing()" aria-label="Start simple breathing exercise">
          <div class="sos-icon">🫁</div>
          <div class="sos-label">Breathe With Me</div>
        </button>
        
        <button class="sos-choice" onclick="startSOSSound()" aria-label="Play calming sound">
          <div class="sos-icon">🎵</div>
          <div class="sos-label">Calm Sound</div>
        </button>
        
        <button class="sos-choice" onclick="startSOSMovement()" aria-label="Get movement suggestions">
          <div class="sos-icon">💪</div>
          <div class="sos-label">Move My Body</div>
        </button>
        
        <button class="sos-choice" onclick="callForHelp()" aria-label="Alert parent or caregiver">
          <div class="sos-icon">📞</div>
          <div class="sos-label">Get Grown-Up</div>
        </button>
      </div>
      
      <div id="sosActivity" class="sos-activity"></div>
      
      <button class="sos-exit" onclick="exitSOSMode()" aria-label="Exit calming mode">I'm Feeling Better</button>
    </div>
  </div>

  <!-- Main Content -->
  <main id="main-content" role="main">
    <!-- Dashboard Navigation Tabs -->
    <div class="dashboard-tabs" role="tablist" aria-label="Dashboard sections">
      <button class="dash-tab active" onclick="showDashSection('tasks')" role="tab" aria-selected="true" aria-controls="tasks-section">
        📝 My Tasks
      </button>
      <button class="dash-tab" onclick="showDashSection('focus')" role="tab" aria-selected="false" aria-controls="focus-section">
        ⏰ Focus & Calm
      </button>
      <button class="dash-tab" onclick="showDashSection('feelings')" role="tab" aria-selected="false" aria-controls="feelings-section">
        😊 My Feelings
      </button>
      <button class="dash-tab" onclick="showDashSection('progress')" role="tab" aria-selected="false" aria-controls="progress-section">
        📊 My Progress
      </button>
    </div>

    <!-- Dashboard Content -->
    <div class="dashboard">
      
      <!-- TASKS SECTION -->
      <div id="tasks-section" class="dash-section active" role="tabpanel" aria-labelledby="tasks-tab">
        <!-- Tasks Panel -->
        <section class="panel" aria-labelledby="tasks-heading">
          <div class="panel-header">
            <h2 id="tasks-heading">📝 My Tasks</h2>
            <div class="view-toggle" role="tablist" aria-label="Task view options">
              <button id="listViewBtn" onclick="toggleView('list')" class="view-btn active" role="tab" aria-selected="true" aria-controls="listViewContent">📋 List</button>
              <button id="visualViewBtn" onclick="toggleView('visual')" class="view-btn" role="tab" aria-selected="false" aria-controls="visualViewContent">🎨 Visual</button>
            </div>
          </div>

          <!-- List View -->
          <div id="listViewContent" role="tabpanel" aria-labelledby="listViewBtn">
            <div class="task-input">
              <input type="text" id="taskInput" placeholder="What do you need to do?" aria-label="Enter task description">
              <select id="taskCategory" aria-label="Select task category">
                <option value="Homework">📚 Homework</option>
                <option value="Chores">🏠 Chores</option>
                <option value="Exercise">🏃 Exercise</option>
                <option value="Personal">👤 Personal Care</option>
                <option value="Fun">🎮 Fun Activity</option>
              </select>
              <select id="taskPriority" aria-label="Select task priority">
                <option value="normal">Normal</option>
                <option value="high">🔴 High Priority</option>
                <option value="low">🟢 Low Priority</option>
              </select>
              <input type="datetime-local" id="taskDeadline" title="Deadline (optional)" aria-label="Set deadline for task">
              <button onclick="addTask()" aria-label="Add new task">Add Task</button>
            </div>
            <div id="taskList" class="tasks" role="list" aria-label="Task list"></div>
          </div>

          <!-- Visual Board View -->
          <div id="visualViewContent" style="display: none;" role="tabpanel" aria-labelledby="visualViewBtn">
            <div id="visualBoard" class="visual-board" role="grid" aria-label="Visual task board"></div>
          </div>
        </section>

        <!-- Routine Builder Panel -->
        <section class="panel" aria-labelledby="routine-heading">
          <h2 id="routine-heading">🔧 Routine Builder</h2>
          <div class="routine-builder">
            <div class="routine-input">
              <input type="text" id="routineName" placeholder="Routine name (e.g., 'After School')" maxlength="50" aria-label="Enter routine name">
              <button onclick="createNewRoutine()" class="create-routine-btn" aria-label="Create new routine">➕ Create Routine</button>
            </div>
            
            <div id="routineEditor" class="routine-editor-container" style="display: none;" role="region" aria-labelledby="editingRoutineName">
              <h4 id="editingRoutineName">Editing: New Routine</h4>
              <div class="routine-task-input">
                <input type="text" id="routineTaskInput" placeholder="Add task to routine" aria-label="Enter task for routine">
                <select id="routineTaskCategory" aria-label="Select task category for routine">
                  <option value="Homework">📚 Homework</option>
                  <option value="Chores">🏠 Chores</option>
                  <option value="Exercise">🏃 Exercise</option>
                  <option value="Personal">👤 Personal Care</option>
                </select>
                <button onclick="addTaskToRoutine()" aria-label="Add task to routine">Add to Routine</button>
              </div>
              <div id="routineTaskList" role="list" aria-label="Tasks in routine"></div>
              <div class="routine-actions">
                <button onclick="saveRoutine()" class="save-routine-btn" aria-label="Save routine">💾 Save Routine</button>
                <button onclick="cancelRoutineEdit()" class="cancel-routine-btn" aria-label="Cancel routine editing">❌ Cancel</button>
                <button onclick="testRoutine()" class="test-routine-btn" aria-label="Test routine">🧪 Test</button>
              </div>
            </div>
            
            <div id="savedRoutines">
              <h4>Saved Routines</h4>
              <div id="routinesList" role="list" aria-label="Saved routines"></div>
            </div>
          </div>
        </section>
      </div>

      <!-- FOCUS & CALM SECTION -->
      <div id="focus-section" class="dash-section" style="display: none;" role="tabpanel" aria-labelledby="focus-tab">
        <!-- Timer Panel -->
        <section class="panel" aria-labelledby="timer-heading">
          <div class="panel-header">
            <h2 id="timer-heading">⏰ Focus Timer</h2>
            <button onclick="openTimerSettings()" class="settings-btn" title="Timer Settings" aria-label="Open timer settings">⚙️</button>
          </div>
          
          <div class="timer-display" id="timerDisplay" aria-live="polite" aria-label="Timer display">25:00</div>
          
          <div class="timer-controls">
            <button onclick="startTimer(25)" class="timer-btn work" aria-label="Start 25 minute focus timer">🎯 Focus (25min)</button>
            <button onclick="startTimer(5)" class="timer-btn break" aria-label="Start 5 minute break timer">☕ Break (5min)</button>
            <button onclick="startTimer(15)" class="timer-btn long-break" aria-label="Start 15 minute long break timer">🌟 Long Break (15min)</button>
            
            <div class="custom-timer-input">
              <input type="number" id="customTimerInput" min="1" max="120" placeholder="Custom minutes" title="Enter custom time (1-120 minutes)" aria-label="Enter custom timer duration in minutes">
              <button onclick="startCustomTimer()" class="timer-btn custom" aria-label="Start custom timer">🎯 Start Custom</button>
            </div>
            
            <button onclick="stopTimer()" class="timer-btn stop" aria-label="Stop timer">⏹️ Stop</button>
          </div>
          
          <div id="timerStatus" class="timer-status" role="status" aria-live="polite"></div>
        </section>

        <!-- Calming Tools Panel -->
        <section class="panel" aria-labelledby="calming-heading">
          <h2 id="calming-heading">🧘 Calming Tools</h2>
          <div class="calming-tools" role="group" aria-label="Calming sound and exercise options">
            <!-- Sound Tools -->
            <div class="tool-category">
              <h4>🎵 Calming Sounds</h4>
              <div class="tool-buttons">
                <button onclick="playSound('sounds/ocean.mp3', true)" aria-label="Play ocean waves sound">🌊 Ocean Waves</button>
                <button onclick="playSound('sounds/rain.mp3', true)" aria-label="Play gentle rain sound">🌧️ Gentle Rain</button>
                <button onclick="playSound('sounds/forest.mp3', true)" aria-label="Play forest sounds">🌲 Forest Sounds</button>
                <button onclick="playWhiteNoise()" aria-label="Play white noise">📻 White Noise</button>
                <button onclick="playBrownNoise()" aria-label="Play brown noise">🔊 Brown Noise</button>
                <button onclick="playHeartbeat()" aria-label="Play heartbeat rhythm">💓 Heartbeat</button>
              </div>
            </div>

            <!-- Quick Sounds -->
            <div class="tool-category">
              <h4>🔔 Quick Sounds</h4>
              <div class="tool-buttons">
                <button onclick="playSound('sounds/chime.mp3', true)" aria-label="Play calming chime">🔔 Calming Chime</button>
                <button onclick="playSound('sounds/bells.mp3', true)" aria-label="Play mindfulness bell">🛎️ Mindfulness Bell</button>
                <button onclick="playSound('sounds/bell.mp3', true)" aria-label="Play success sound">✨ Success Ding</button>
              </div>
            </div>

            <!-- Breathing & Movement -->
            <div class="tool-category">
              <h4>🫁 Breathing & Movement</h4>
              <div class="tool-buttons">
                <button onclick="breathingExercise()" aria-label="Start breathing exercise">🫁 Breathing Exercise</button>
                <button onclick="startProgressiveMuscleRelaxation()" aria-label="Start muscle relaxation">💪 Muscle Relaxation</button>
                <button onclick="startDeskStretches()" aria-label="Start desk stretches">🤸 Desk Stretches</button>
              </div>
            </div>

            <!-- Mindfulness Tools -->
            <div class="tool-category">
              <h4>🧘 Mindfulness Tools</h4>
              <div class="tool-buttons">
                <button onclick="start54321Grounding()" aria-label="Start 5-4-3-2-1 grounding technique">👀 5-4-3-2-1 Grounding</button>
                <button onclick="startBodyScan()" aria-label="Start body scan meditation">🧘 Body Scan</button>
                <button onclick="startGuidedVisualization()" aria-label="Start guided visualization">🏞️ Peaceful Place</button>
                <button onclick="showPositiveAffirmations()" aria-label="Show positive affirmations">⭐ Positive Words</button>
              </div>
            </div>

            <!-- Visual Tools -->
            <div class="tool-category">
              <h4>👁️ Visual Tools</h4>
              <div class="tool-buttons">
                <button onclick="startFocusDot()" aria-label="Start focus dot exercise">🔴 Focus Dot</button>
                <button onclick="startColorBreathing()" aria-label="Start color breathing">🌈 Color Breathing</button>
                <button onclick="startCountingExercise()" aria-label="Start counting exercise">🔢 Counting Game</button>
              </div>
            </div>

            <!-- Control Buttons -->
            <div class="tool-category">
              <h4>⚙️ Controls</h4>
              <div class="tool-buttons">
                <button onclick="stopAllSounds()" class="stop-sounds" aria-label="Stop all sounds">⏹️ Stop All Sounds</button>
                <button onclick="stopAllExercises()" class="stop-exercises" aria-label="Stop all exercises">🛑 Stop All Activities</button>
              </div>
            </div>
          </div>
        </section>
      </div>

      <!-- FEELINGS SECTION -->
      <div id="feelings-section" class="dash-section" style="display: none;" role="tabpanel" aria-labelledby="feelings-tab">
        <!-- Emotion Chart -->
        <section class="panel" aria-labelledby="emotion-heading">
          <h2 id="emotion-heading">😊 How Are You Feeling?</h2>
          <p style="text-align: center; margin-bottom: 1rem; color: var(--text-secondary);">
            Tap the face that shows how you feel right now
          </p>
          
          <div class="emotion-chart" role="group" aria-label="Emotion selection chart">
            <button class="emotion-card" onclick="selectEmotion('happy', '😊')" aria-label="I feel happy">
              <div class="emotion-face">😊</div>
              <div class="emotion-label">Happy</div>
              <div class="emotion-description">Things are going well!</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('sad', '😢')" aria-label="I feel sad">
              <div class="emotion-face">😢</div>
              <div class="emotion-label">Sad</div>
              <div class="emotion-description">I feel down or upset</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('angry', '😠')" aria-label="I feel angry">
              <div class="emotion-face">😠</div>
              <div class="emotion-label">Angry</div>
              <div class="emotion-description">Something made me mad</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('worried', '😰')" aria-label="I feel worried">
              <div class="emotion-face">😰</div>
              <div class="emotion-label">Worried</div>
              <div class="emotion-description">I'm nervous about something</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('tired', '😴')" aria-label="I feel tired">
              <div class="emotion-face">😴</div>
              <div class="emotion-label">Tired</div>
              <div class="emotion-description">I need rest or sleep</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('excited', '🤩')" aria-label="I feel excited">
              <div class="emotion-face">🤩</div>
              <div class="emotion-label">Excited</div>
              <div class="emotion-description">Full of energy and joy!</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('frustrated', '😤')" aria-label="I feel frustrated">
              <div class="emotion-face">😤</div>
              <div class="emotion-label">Frustrated</div>
              <div class="emotion-description">Things aren't working right</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('calm', '😌')" aria-label="I feel calm">
              <div class="emotion-face">😌</div>
              <div class="emotion-label">Calm</div>
              <div class="emotion-description">Peaceful and relaxed</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('confused', '😕')" aria-label="I feel confused">
              <div class="emotion-face">😕</div>
              <div class="emotion-label">Confused</div>
              <div class="emotion-description">I don't understand</div>
            </button>
            
            <button class="emotion-card" onclick="selectEmotion('scared', '😨')" aria-label="I feel scared">
              <div class="emotion-face">😨</div>
              <div class="emotion-label">Scared</div>
              <div class="emotion-description">Something feels scary</div>
            </button>
          </div>
          
          <div id="emotionFeedback" class="emotion-feedback" role="status" aria-live="polite"></div>
        </section>

        <!-- Behavior Panel -->
        <section class="panel" aria-labelledby="behavior-heading">
          <h2 id="behavior-heading">🌟 Behavior Tracking</h2>
          <div class="behavior-buttons" role="group" aria-label="Positive behavior buttons">
            <button onclick="markBehavior('Focused')" aria-label="Mark focused behavior">🎯 Focused</button>
            <button onclick="markBehavior('Kind')" aria-label="Mark kind behavior">❤️ Kind</button>
            <button onclick="markBehavior('Calm')" aria-label="Mark calm behavior">🧘 Calm</button>
            <button onclick="markBehavior('Creative')" aria-label="Mark creative behavior">🎨 Creative</button>
            <button onclick="markBehavior('Helpful')" aria-label="Mark helpful behavior">🤝 Helpful</button>
            <button onclick="markBehavior('Patient')" aria-label="Mark patient behavior">⏳ Patient</button>
          </div>
          <div id="behaviorLog" role="log" aria-label="Recent positive behaviors"></div>
          <div class="progress-bar" 
               role="progressbar" 
               aria-label="Daily positive behavior progress"
               aria-valuenow="0" 
               aria-valuemin="0" 
               aria-valuemax="10"
               title="Daily positive behavior progress">
            <div class="progress-fill" id="behaviorProgress" style="width: 0%"></div>
          </div>
          <p id="behaviorProgressText" aria-live="polite">0 positive behaviors today!</p>
        </section>
      </div>

      <!-- PROGRESS SECTION -->
      <div id="progress-section" class="dash-section" style="display: none;" role="tabpanel" aria-labelledby="progress-tab">
        <!-- Progress Charts Panel -->
        <section class="panel" aria-labelledby="charts-heading">
          <h2 id="charts-heading">📊 Progress Charts</h2>
          <div class="chart-controls">
            <button onclick="updateCharts()" class="chart-update-btn" aria-label="Update charts with current data">
              🔄 Update Charts
            </button>
          </div>
          <div id="chartsContainer" class="charts-main-container">
            <p style="text-align: center; color: var(--text-secondary); padding: 2rem;">
              Select a profile and click "Update Charts" to see your progress!
            </p>
          </div>
        </section>

        <!-- AI Smart Suggestions Panel -->
        <section class="panel" aria-labelledby="ai-heading">
          <h2 id="ai-heading">🤖 AI Smart Assistant</h2>
          <div class="ai-status">
            <div class="ai-mood" id="aiMoodDisplay" role="status" aria-live="polite">Analyzing your patterns...</div>
            <button onclick="refreshAISuggestions()" class="ai-refresh-btn" aria-label="Refresh AI suggestions">🔄 Refresh</button>
            <button onclick="toggleAISettings()" class="ai-settings-btn" aria-label="Open AI settings">⚙️ Settings</button>
          </div>
          
          <!-- AI Tabs -->
          <div class="ai-tabs" role="tablist" aria-label="AI assistant sections">
            <button class="ai-tab active" onclick="showAITab('suggestions')" role="tab" aria-selected="true" aria-controls="aiSuggestions">💡 Suggestions</button>
            <button class="ai-tab" onclick="showAITab('achievements')" role="tab" aria-selected="false" aria-controls="aiAchievements">🏆 Achievements</button>
            <button class="ai-tab" onclick="showAITab('insights')" role="tab" aria-selected="false" aria-controls="aiInsights">📊 Insights</button>
          </div>
          
          <!-- Suggestions Tab -->
          <div id="aiSuggestions" class="ai-tab-content active" role="tabpanel" aria-labelledby="ai-suggestions-tab">
            <div class="ai-loading">AI is learning your patterns...</div>
          </div>
          
          <!-- Achievements Tab -->
          <div id="aiAchievements" class="ai-tab-content" role="tabpanel" aria-labelledby="ai-achievements-tab">
            <div id="achievementPredictions"></div>
            <div id="earnedAchievements"></div>
          </div>
          
          <!-- Insights Tab -->
          <div id="aiInsights" class="ai-tab-content" role="tabpanel" aria-labelledby="ai-insights-tab">
            <div id="energyInsights"></div>
            <div id="patternInsights"></div>
            <div id="progressPredictions"></div>
          </div>
          
          <!-- AI Settings Panel -->
          <div id="aiSettingsPanel" class="ai-settings-panel" style="display: none;" role="region" aria-labelledby="ai-settings-heading">
            <h4 id="ai-settings-heading">AI Assistant Settings</h4>
            <div class="ai-setting">
              <label>
                <input type="checkbox" id="aiLearningEnabled" checked onchange="updateAISetting('learningEnabled', this.checked)">
                Enable AI Learning
              </label>
            </div>
            <div class="ai-setting">
              <label>
                <input type="checkbox" id="smartRemindersEnabled" checked onchange="updateAISetting('smartRemindersEnabled', this.checked)">
                Smart Reminders
              </label>
            </div>
            <div class="ai-setting">
              <label>
                <input type="checkbox" id="achievementPredictions" checked onchange="updateAISetting('achievementPredictions', this.checked)">
                Achievement Predictions
              </label>
            </div>
            <div class="ai-setting">
              <label>
                <input type="checkbox" id="adaptiveDifficulty" checked onchange="updateAISetting('adaptiveDifficulty', this.checked)">
                Adaptive Difficulty
              </label>
            </div>
            <div class="ai-setting">
              <label>
                <input type="checkbox" id="energyAnalysis" checked onchange="updateAISetting('energyAnalysis', this.checked)">
                Energy Level Analysis
              </label>
            </div>
            <div class="ai-setting">
              <label for="aiSuggestionLevel">Suggestion Level:</label>
              <select id="aiSuggestionLevel" onchange="updateAISetting('suggestionLevel', this.value)">
                <option value="low">Low (Few suggestions)</option>
                <option value="medium" selected>Medium (Balanced)</option>
                <option value="high">High (Many suggestions)</option>
              </select>
            </div>
            <div class="ai-setting">
              <label for="aiPersonality">AI Personality:</label>
              <select id="aiPersonality" onchange="updateAISetting('personalityType', this.value)">
                <option value="encouraging" selected>Encouraging</option>
                <option value="neutral">Neutral</option>
                <option value="playful">Playful</option>
              </select>
            </div>
            <button onclick="resetAIData()" class="danger-btn">🗑️ Reset AI Learning</button>
          </div>
        </section>
      </div>

    </div>
  </main>
    <footer style="text-align: center; padding: 2rem; margin-top: 3rem; border-top: 1px solid var(--border-color); font-size: 0.9rem; color: var(--text-secondary);">
    <p>
      <a href="terms.html" style="color: var(--accent-primary); margin: 0 1rem;">Terms & Conditions</a> |
      <a href="privacy.html" style="color: var(--accent-primary); margin: 0 1rem;">Privacy Policy</a>
    </p>
    <p style="margin-top: 0.5rem;">Built with care for neurodivergent children and families</p>
  </footer>

  <!-- Timer Settings Modal -->
  <div id="timerSettingsModal" class="modal" role="dialog" aria-labelledby="timer-settings-title" aria-hidden="true">
    <div class="modal-content">
      <span class="close" onclick="closeTimerSettings()" aria-label="Close timer settings">&times;</span>
      
      <div class="modal-header">
        <h2 id="timer-settings-title">⚙️ Timer Settings</h2>
      </div>
      
      <div class="modal-body">
        <div class="timer-settings-grid">
          <div class="setting-group">
            <h3>📊 Timer Durations</h3>
            
            <div class="timer-setting">
              <label for="focusTimeInput">🎯 Focus Time:</label>
              <input type="number" id="focusTimeInput" min="5" max="90" value="25" aria-label="Focus time in minutes">
              <span>minutes (5-90)</span>
            </div>
            
            <div class="timer-setting">
              <label for="shortBreakInput">☕ Short Break:</label>
              <input type="number" id="shortBreakInput" min="2" max="30" value="5" aria-label="Short break time in minutes">
              <span>minutes (2-30)</span>
            </div>
            
            <div class="timer-setting">
              <label for="longBreakInput">🌟 Long Break:</label>
              <input type="number" id="longBreakInput" min="5" max="60" value="15" aria-label="Long break time in minutes">
              <span>minutes (5-60)</span>
            </div>
          </div>
          
          <div class="setting-group">
            <h3>🎵 Timer Options</h3>
            
            <div class="timer-option">
              <label>
                <input type="checkbox" id="autoStartBreaks" aria-label="Auto-start suggested timers">
                Auto-start suggested timers
              </label>
            </div>
            
            <div class="timer-option">
              <label>
                <input type="checkbox" id="timerSoundEnabled" checked aria-label="Play completion sound">
                Play completion sound
              </label>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <div class="modal-actions">
          <button onclick="saveTimerSettings()" class="save-btn">💾 Save Settings</button>
          <button onclick="resetTimerSettings()" class="reset-btn">🔄 Reset to Defaults</button>
          <button onclick="closeTimerSettings()" class="close-btn">❌ Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Information Panel -->
  <div id="infoPanel" class="info-panel" role="dialog" aria-labelledby="info-panel-title" aria-hidden="true">
    <div class="info-content">
      <div class="info-header">
        <h2 id="info-panel-title">Help & Information</h2>
        <button class="close-btn" onclick="toggleInfoPanel()" aria-label="Close help panel">✖</button>
      </div>
      <div class="info-tabs" role="tablist" aria-label="Information categories">
        <button class="info-tab active" onclick="showInfoTab('kids')" role="tab" aria-selected="true">For Kids</button>
        <button class="info-tab" onclick="showInfoTab('parents')" role="tab" aria-selected="false">For Parents</button>
        <button class="info-tab" onclick="showInfoTab('features')" role="tab" aria-selected="false">Features</button>
        <button class="info-tab" onclick="showInfoTab('resources')" role="tab" aria-selected="false">Resources</button>
        <button class="info-tab" onclick="showInfoTab('voice')" role="tab" aria-selected="false">Voice Settings</button>
      </div>
      <div class="info-body">
          <!-- About Section -->
        <div id="about-info" class="info-section active" role="tabpanel">
          <h3>💙 About This App</h3>
          <p style="font-style: italic; margin-bottom: 1.5rem;">
            I built this ADHD & ASD Helper Dashboard with love for my son, and for all the families navigating the beautiful challenges of neurodivergence.
          </p>
          
          <p>
            As a parent, I watched my son struggle with organization, focus, and managing his emotions. I saw how traditional planners and tools weren't designed for how his brain works. I saw the frustration, the overwhelm, and the moments when he needed help but didn't know how to ask for it.
          </p>
          
          <p><strong>So I built this.</strong></p>
          
          <p>
            This isn't just an app - it's a toolkit designed specifically for neurodivergent children. Every feature exists because of a real need I witnessed:
          </p>
          
          <ul style="margin: 1rem 0; line-height: 1.8;">
            <li><strong>Visual task boards</strong> because lists felt overwhelming</li>
            <li><strong>The SOS button</strong> for those moments when everything feels too much</li>
            <li><strong>Calming tools</strong> for when the world gets too loud</li>
            <li><strong>Emotion tracking</strong> to help build emotional awareness</li>
            <li><strong>Routine builders</strong> because predictability brings comfort</li>
            <li><strong>Positive reinforcement</strong> because every small win matters</li>
          </ul>
          
          <p>
            This app is built with understanding, not judgment. It celebrates progress, not perfection. It's designed to help children feel capable, supported, and successful in their own unique way.
          </p>
          
          <div style="background: var(--primary-light); padding: 1.5rem; border-radius: 10px; margin: 2rem 0;">
            <p style="margin: 0.5rem 0;"><strong>To all the parents using this:</strong> You're doing an amazing job.</p>
            <p style="margin: 0.5rem 0;"><strong>To all the kids using this:</strong> You're amazing exactly as you are.</p>
          </div>
          
          <p style="text-align: center; font-style: italic; margin-top: 2rem;">
            With hope and understanding,<br>
            A parent who gets it
          </p>
          
          <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border-color);">
          
          <p style="font-size: 0.9rem; color: var(--text-secondary);">
            <strong>Privacy Note:</strong> This app stores all data locally on your device for privacy. No information is sent to external servers.
          </p>
        </div>
        <div id="kids-info" class="info-section" role="tabpanel">
          <h3>🌟 Welcome to Your Helper Dashboard!</h3>
          <p><strong>What is this app?</strong><br>
          This is your special helper to stay organized and earn rewards for being awesome!</p>
          
          <h3>🎯 How to Use Your Dashboard:</h3>
          <ul>
            <li><strong>Tasks:</strong> Add things you need to do and check them off when done!</li>
            <li><strong>Visual Board:</strong> See your tasks as colorful cards with fun emojis</li>
            <li><strong>Timer:</strong> Use the focus timer to work for 25 minutes, then take a break</li>
            <li><strong>Behavior:</strong> Click buttons when you're being good to earn extra stars</li>
            <li><strong>Calming Tools:</strong> Click sounds or breathing exercise when you need to relax</li>
            <li><strong>Charts:</strong> See your awesome progress over time!</li>
          </ul>
        </div>

        <div id="parents-info" class="info-section" role="tabpanel">
          <h3>👨‍👩‍👧‍👦 Parent Guide</h3>
          <p><strong>Features for Supporting Your Child:</strong></p>
          
          <h3>🎯 Key Features:</h3>
          <ul>
            <li><strong>Multiple Profiles:</strong> Create separate profiles for each child</li>
            <li><strong>Visual Task Board:</strong> ADHD-friendly visual representation of tasks</li>
            <li><strong>Progress Tracking:</strong> Charts and statistics to monitor progress</li>
            <li><strong>Customizable Themes:</strong> Light, dark, and calm color schemes</li>
            <li><strong>Accessibility:</strong> Font size controls and high contrast mode</li>
            <li><strong>Parent Dashboard:</strong> Secure access to settings and data management</li>
          </ul>
        </div>

        <div id="features-info" class="info-section" role="tabpanel">
          <h3>🛠️ App Features</h3>
          <ul>
            <li><strong>Visual Task Board:</strong> Emoji-based task cards for visual learners</li>
            <li><strong>Focus Timer:</strong> Pomodoro-style work/break cycles</li>
            <li><strong>Progress Charts:</strong> Visual feedback on achievements</li>
            <li><strong>Routine Builder:</strong> Create custom daily routines</li>
            <li><strong>Calming Tools:</strong> Sounds and breathing exercises</li>
            <li><strong>Multi-child Support:</strong> Separate profiles and data</li>
          </ul>
        </div>

        <div id="resources-info" class="info-section" role="tabpanel">
          <h3>📚 Helpful Resources</h3>
          <div class="resources-content"></div>
        </div>

        <div id="voice-info" class="info-section" role="tabpanel">
          <h3>🗣️ Voice Settings</h3>
          
          <div class="voice-controls">
            <h4>Choose Voice:</h4>
            <select id="voiceSelect" onchange="updateSelectedVoice()" aria-label="Select voice for text-to-speech">
              <option value="">Select a voice...</option>
            </select>
            
            <h4>Voice Settings:</h4>
            <div class="voice-setting">
              <label for="voiceSpeed">Speed:</label>
              <input type="range" id="voiceSpeed" min="0.5" max="2" step="0.1" value="0.9" onchange="updateVoiceSpeed()" aria-label="Voice speed">
              <span id="speedValue" aria-live="polite">0.9</span>
            </div>
            
            <div class="voice-setting">
              <label for="voicePitch">Pitch:</label>
              <input type="range" id="voicePitch" min="0.5" max="2" step="0.1" value="1.0" onchange="updateVoicePitch()" aria-label="Voice pitch">
              <span id="pitchValue" aria-live="polite">1.0</span>
            </div>
            
            <div class="voice-setting">
              <label for="voiceVolume">Volume:</label>
              <input type="range" id="voiceVolume" min="0" max="1" step="0.1" value="0.7" onchange="updateVoiceVolume()" aria-label="Voice volume">
              <span id="volumeValue" aria-live="polite">0.7</span>
            </div>
            
            <div class="voice-toggle">
              <label>
                <input type="checkbox" id="voiceEnabled" checked onchange="toggleVoicePrompts()" aria-label="Enable voice prompts">
                Enable Voice Prompts
              </label>
            </div>
            
            <div class="voice-test">
              <button onclick="testVoice()" class="test-voice-btn" aria-label="Test voice with sample text">🎤 Test Voice</button>
              <button onclick="speakTaskExample()" class="test-voice-btn" aria-label="Test voice with task completion example">📝 Test Task Voice</button>
              <button onclick="speakBehaviorExample()" class="test-voice-btn" aria-label="Test voice with behavior example">⭐ Test Behavior Voice</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Profile Manager Modal -->
  <div id="profileModal" class="modal" role="dialog" aria-labelledby="profile-modal-title" aria-hidden="true">
    <div class="modal-content">
      <h2 id="profile-modal-title">👥 Manage Profiles</h2>
      <div class="profile-form">
        <input type="text" id="profileName" placeholder="Child's name" maxlength="50" aria-label="Enter child's name">
        <input type="number" id="profileAge" placeholder="Age" min="3" max="18" aria-label="Enter child's age">
        <button onclick="createProfile()" aria-label="Add new profile">Add Profile</button>
      </div>
      <div id="profileList" role="list" aria-label="Existing profiles"></div>
      <div class="modal-actions">
        <button onclick="closeProfileManager()" aria-label="Close profile manager">Close</button>
      </div>
    </div>
  </div>

  <!-- Parent Login Modal -->
  <div id="parentModal" class="modal" role="dialog" aria-labelledby="parent-login-title" aria-hidden="true">
    <div class="modal-content">
      <h2 id="parent-login-title">🔐 Parent Login</h2>
      <input type="password" id="parentPin" placeholder="Enter PIN" maxlength="4" aria-label="Enter parent PIN">
      <div id="pinError" class="pin-error" role="alert" aria-live="polite"></div>
      <div class="modal-actions">
        <button onclick="checkParentPin()" aria-label="Login with PIN">Login</button>
        <button onclick="closeParentModal()" aria-label="Cancel login">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Parent Dashboard Modal -->
  <div id="parentDashboard" class="modal" role="dialog" aria-labelledby="parent-dashboard-title" aria-hidden="true">
    <div class="modal-content parent-dashboard-content">
      <span class="close" onclick="closeParentDashboard()" aria-label="Close parent dashboard">&times;</span>
      
      <div class="modal-header">
        <h2 id="parent-dashboard-title">👨‍👩‍👧‍👦 Parent Dashboard</h2>
      </div>
      
      <div class="modal-body">
        <div class="parent-sections">
          <div class="parent-section">
            <h3>🎁 Reward Settings</h3>
            <div class="reward-setting">
              <label for="taskPoints">Points for Task Completion:</label>
              <input type="number" id="taskPoints" value="5" min="1" max="20" class="points-input" aria-label="Points awarded for completing tasks">
            </div>
            <div class="reward-setting">
              <label for="behaviorPoints">Points for Good Behavior:</label>
              <input type="number" id="behaviorPoints" value="3" min="1" max="10" class="points-input" aria-label="Points awarded for positive behavior">
            </div>
            <div class="parent-section">
            <h3>📱 Emergency Contact</h3>
            <div class="reward-setting">
              <label for="emergencyContact">Parent Phone Number:</label>
              <input type="tel" id="emergencyContact" placeholder="+61 4XX XXX XXX" class="points-input" aria-label="Emergency contact phone number for SOS alerts">
              <small style="display: block; margin-top: 0.5rem; color: var(--text-secondary);">
                This number will receive an alert when your child uses "Get Grown-Up" in SOS mode
              </small>
            </div>
          </div>
          
          <div class="parent-section">
            <h3>📊 Current Child Stats</h3>
            <div id="childStats" role="region" aria-live="polite">Select a child profile to view stats</div>
          </div>
          
          <div class="parent-section">
            <h3>⚙️ Settings</h3>
            <div class="parent-controls">
              <button onclick="openChangePinModal()" aria-label="Change parent PIN">🔑 Change PIN</button>
              <button onclick="resetChildStats()" class="warning-btn" aria-label="Reset current child's stats but keep profile">🔄 Reset Stats</button>
              <button onclick="exportData()" aria-label="Export all data">📤 Export Data</button>
              <button onclick="clearAllData()" class="danger-btn" aria-label="Clear all data (warning: irreversible)">🗑️ Clear All Data</button>
            </div>
          </div>
        </div>
      </div>
      
      <div class="modal-footer">
        <div class="modal-actions">
          <button onclick="saveParentSettings()" aria-label="Save parent settings">💾 Save Settings</button>
          <button onclick="closeParentDashboard()" aria-label="Close parent dashboard">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Change PIN Modal -->
  <div id="changePinModal" class="modal" role="dialog" aria-labelledby="change-pin-title" aria-hidden="true">
    <div class="modal-content">
      <h2 id="change-pin-title">🔑 Change Parent PIN</h2>
      <input type="password" id="currentPin" placeholder="Current PIN" maxlength="4" aria-label="Enter current PIN">
      <input type="password" id="newPin" placeholder="New PIN (4 digits)" maxlength="4" aria-label="Enter new PIN">
      <input type="password" id="confirmPin" placeholder="Confirm New PIN" maxlength="4" aria-label="Confirm new PIN">
      <div id="pinChangeError" class="pin-change-error" role="alert" aria-live="polite"></div>
      <div class="modal-actions">
        <button onclick="changeParentPin()" aria-label="Change PIN">Change PIN</button>
        <button onclick="closeChangePinModal()" aria-label="Cancel PIN change">Cancel</button>
      </div>
    </div>
  </div>

  <div class="sr-only">
    <div id="announcements" aria-live="polite" aria-atomic="true"></div>
  </div>
<!-- Register Service Worker -->
<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('./service-worker.js')
      .then(registration => {
        console.log('Service Worker registered successfully:', registration.scope);
      })
      .catch(error => {
        console.log('Service Worker registration failed:', error);
      });
  });
}
</script>

  <script src="script.js"></script>
</body>
</html>